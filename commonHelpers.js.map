{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import Axios from \"axios\";\nconst axios = Axios.create({\n  baseURL: 'https://pixabay.com',\n});\n\nconst fetchImages = async (value, page) => {\n  const res = await axios.get('/api/', {\n    params: {\n      q: value,\n      per_page: 15,\n      page: page,\n      key: '44460867-9f013743ec0c5b2ec6c0f5088',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    }\n  })\n  return res.data\n}\n\nexport default fetchImages;","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nfunction imagesTemplate(data) {\n      const markup = data.hits\n        .map(image => {\n          const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n          return `<li class=\"gallery-item\">\n           <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      width=360;\n      height=200;\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags} \" />\n          <div class=\"image-info\">\n               <p>LIKES <span>${likes}</span></p>\n                    <p>VIEWS <span>${views}</span></p>\n                    <p>COMMENTS <span>${comments}</span></p>\n                    <p>DOWNLOADS <span>${downloads}</span></p>\n                </div>\n                </a>\n            </li>\n        `;\n        })\n        .join('');\n      return markup;\n    }\nexport default imagesTemplate;\n","import fetchImages from './js/pixabay-api';\nimport imagesTemplate from './js/render-function';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load-images-btn');\n\nlet page = 1;\nlet value = '';\nlet lightbox;\nlet totalPages;\nlet cardHeight;\n\nform.addEventListener('submit', onSubmit);\nasync function onSubmit(e) {\n    e.preventDefault();\n    hideLoadBtn();\n    showLoader();\n    gallery.innerHTML = '';\n    page = 1;\n    value = e.target.elements.search.value.trim();\n    if (value === ''){\n        iziToast.warning({\n            title: 'Warning',\n            message: 'Search query is empty. Please, enter a word',\n            position: 'topRight',\n            backgroundColor: 'orange',\n            theme: 'dark',\n            messageColor: 'white',\n        });\n        hideLoader();\n        return\n    }\n    \n    try {\n        const data = await fetchImages(value, page);\n        if (data.hits.length === 0) {\n            hideLoadBtn();\n            hideLoader();\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                backgroundColor: 'red',\n                theme: 'dark',\n                messageColor: 'white',\n            });\n            form.reset();\n            return\n        }\n        totalPages = Math.ceil(data.totalHits / 15);\n        const markup = imagesTemplate(data);\n        gallery.insertAdjacentHTML('beforeend', markup);\n        lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n        lightbox.refresh();\n        showLoadBtn();\n    } catch (error) {\n        hideLoadBtn();\n        console.log(error);\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n            backgroundColor: 'red',\n            theme: 'dark',\n            messageColor: 'white',\n        })\n    }\n    cardHeight = gallery.firstChild.getBoundingClientRect().height;\n    hideLoader();\n    form.reset();\n}\n\n\nloadBtn.addEventListener('click', async () => {\n    hideLoadBtn();\n    showLoader();\n    page++;\n    if (page > totalPages) {\n        iziToast.info({\n            title: '',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n            backgroundColor: 'blue',\n            theme: 'dark',\n            messageColor: 'white',\n        });\n        hideLoader();\n        return\n    };\n    const data = await fetchImages(value, page)\n    const markup = imagesTemplate(data);\n    gallery.insertAdjacentHTML('beforeend', markup);\n    scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\",\n    });\n    lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n    lightbox.refresh();\n    hideLoader();\n    showLoadBtn();\n})\n\n\nfunction showLoadBtn() {\n    loadBtn.classList.remove('visually-hidden');\n}\nfunction hideLoadBtn() {\n    loadBtn.classList.add('visually-hidden');\n}\n\nfunction showLoader() {\n    loader.classList.remove('visually-hidden');\n}\nfunction hideLoader() {\n    loader.classList.add('visually-hidden');\n}"],"names":["axios","Axios","fetchImages","value","page","imagesTemplate","data","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loader","loadBtn","lightbox","totalPages","cardHeight","onSubmit","e","hideLoadBtn","showLoader","iziToast","hideLoader","markup","SimpleLightbox","showLoadBtn","error"],"mappings":"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"}